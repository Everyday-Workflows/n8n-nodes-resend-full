<!doctype html>
<html>
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Workflow Execution Failed</title>
	</head>
	<body
		style="
			margin: 0;
			padding: 0;
			background-color: #f4f4f7;
			font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
			-webkit-font-smoothing: antialiased;
		"
	>
		<table
			role="presentation"
			border="0"
			cellpadding="0"
			cellspacing="0"
			width="100%"
			style="background-color: #f4f4f7; padding: 20px 0"
		>
			<tr>
				<td align="center">
					<table
						role="presentation"
						border="0"
						cellpadding="0"
						cellspacing="0"
						width="100%"
						style="
							max-width: 600px;
							background-color: #ffffff;
							border-radius: 8px;
							overflow: hidden;
							box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
						"
					>
						<!-- HEADER -->
						<tr>
							<td style="background-color: #1a202c; padding: 24px; text-align: center">
								<h1
									style="
										color: #ffffff;
										margin: 0;
										font-size: 20px;
										font-weight: 600;
										letter-spacing: 0.5px;
									"
								>
									Everyday Workflows
								</h1>
							</td>
						</tr>

						<!-- CONTENT -->
						<tr>
							<td style="padding: 32px 24px">
								<!-- ALERT BANNER -->
								<table role="presentation" border="0" cellpadding="0" cellspacing="0" width="100%">
									<tr>
										<td style="padding-bottom: 24px; text-align: center">
											<h2 style="color: #e53e3e; margin: 0 0 12px 0; font-size: 24px">
												⚠️ Workflow Execution Failed
											</h2>
											<p style="margin: 0; font-size: 16px; line-height: 1.5; color: #4a5568">
												An error occurred in the
												<strong style="color: #2d3748">{{ $json.workflow.name }}</strong> workflow.
											</p>
										</td>
									</tr>

									<!-- BUTTON -->
									<tr>
										<td align="center" style="padding-bottom: 32px">
											<a
												href="{{ $json.execution.url }}"
												target="_blank"
												style="
													display: inline-block;
													background-color: #e53e3e;
													color: #ffffff;
													text-decoration: none;
													padding: 14px 28px;
													border-radius: 6px;
													font-weight: bold;
													font-size: 16px;
													mso-padding-alt: 0;
												"
											>
												<!--[if mso
													]><i
														style="
															letter-spacing: 25px;
															mso-font-width: -100%;
															mso-text-raise: 30pt;
														"
														>&nbsp;</i
													><!
												[endif]-->
												<span style="mso-text-raise: 15pt">Debug Execution &rarr;</span>
												<!--[if mso
													]><i style="letter-spacing: 25px; mso-font-width: -100%">&nbsp;</i><!
												[endif]-->
											</a>
										</td>
									</tr>

									<!-- DETAILS BOX -->
									<tr>
										<td style="background-color: #edf2f7; border-radius: 6px; padding: 20px">
											<table
												role="presentation"
												border="0"
												cellpadding="0"
												cellspacing="0"
												width="100%"
											>
												<tr>
													<td style="padding-bottom: 16px">
														<span
															style="
																display: block;
																font-size: 12px;
																font-weight: bold;
																text-transform: uppercase;
																color: #718096;
																margin-bottom: 4px;
															"
															>Error Message</span
														>
														<span style="font-size: 15px; color: #2d3748; line-height: 1.4"
															>{{ $json.execution.error.message }}</span
														>
													</td>
												</tr>
												<tr>
													<td>
														<span
															style="
																display: block;
																font-size: 12px;
																font-weight: bold;
																text-transform: uppercase;
																color: #718096;
																margin-bottom: 4px;
															"
															>Failed Node</span
														>
														<span style="font-size: 15px; color: #2d3748; font-weight: 500"
															>{{ $json.execution.lastNodeExecuted }}</span
														>
													</td>
												</tr>
											</table>
										</td>
									</tr>

									<!-- STACK TRACE -->
									<tr>
										<td style="padding-top: 24px">
											<p
												style="
													margin: 0 0 8px 0;
													font-size: 12px;
													font-weight: bold;
													color: #718096;
													text-transform: uppercase;
												"
											>
												Stack Trace
											</p>
											<div
												style="
													background-color: #2d3748;
													color: #e2e8f0;
													padding: 16px;
													border-radius: 6px;
													font-family: 'Courier New', Courier, monospace;
													font-size: 12px;
													line-height: 1.4;
													overflow-x: auto;
													white-space: pre-wrap;
												"
											>
												{{ $json.execution.error.stack }}
											</div>
										</td>
									</tr>
								</table>
							</td>
						</tr>

						<!-- FOOTER -->
						<tr>
							<td
								style="
									background-color: #f7fafc;
									padding: 24px;
									text-align: center;
									border-top: 1px solid #edf2f7;
								"
							>
								<p style="margin: 0; font-size: 12px; color: #a0aec0">
									Automated System Alert • Everyday Workflows
								</p>
							</td>
						</tr>
					</table>
				</td>
			</tr>
		</table>
	</body>
</html>
